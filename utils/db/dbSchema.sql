CREATE TABLE "workout" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"display_name" VARCHAR(255) NOT NULL,
	"sets" SMALLINT NOT NULL,
	"reps" SMALLINT NOT NULL,
	"workout_category_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "workout_category" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"display_name" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "event" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"workout_id" INTEGER NOT NULL,
	"weight" REAL NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "event_session" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"event_id" INTEGER NOT NULL,
	"session_id" INTEGER NOT NULL,
	PRIMARY KEY("id")
);

CREATE TABLE "session" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"date" DATE NOT NULL,
	PRIMARY KEY("id")
);

ALTER TABLE "workout"
ADD FOREIGN KEY("workout_category_id") REFERENCES "workout_category"("id")
ON UPDATE CASCADE ON DELETE RESTRICT;

ALTER TABLE "event"
ADD FOREIGN KEY("workout_id") REFERENCES "workout"("id")
ON UPDATE CASCADE ON DELETE RESTRICT;

ALTER TABLE "event_session"
ADD FOREIGN KEY("event_id") REFERENCES "event"("id")
ON UPDATE CASCADE ON DELETE RESTRICT;

ALTER TABLE "event_session"
ADD FOREIGN KEY("session_id") REFERENCES "session"("id")
ON UPDATE CASCADE ON DELETE RESTRICT;